$main-navigation-width: 15.25rem;
// $main-navigation-padding: 7rem .75rem .75rem;
$main-navigation-padding: .75rem .75rem;
$main-navigation-bgcolor: $white;
$nav-link-height: 4rem;
$nav-link-padding: 0 1rem;
$nav-link-spacing-after: .75rem;

$page-header-spacing-after: 2.75rem;
$page-padding: 0 2.25rem;
$content-box-padding: 1.5rem;
$content-box-bgcolor: $white;

$modal-padding: 1.5rem 1.5rem;

.white-box {
    padding: $content-box-padding;
    box-shadow: 0 0 .5rem 0 $shadow-1;
    border: 0;
    background-color: $content-box-bgcolor;
    @include borderRadius(1rem);
    .card-body {
        padding: 0 !important;
        // should be important to override .p-3
    }
    .card-title {
        @extend .title-base
    }
}
.button-base {
    border: 1px solid $purple-1;
    @include borderRadius(.5rem);
    &:hover {
        box-shadow: 0 0 .75rem .125rem $shadow-1;
    }
}
.button-light {
    @extend .button-base;
    background-color: $white-1;
    color: $purple-1;
}
.button-purple {
    @extend .button-base;
    background-color: $purple-1;
    color: $white-1;
}
.header-base {
    height: 3.25rem;
    line-height: 3.25rem;
    border: 0;
}
.title-base {
    font-size: 1rem;
    letter-spacing: .125rem;
    text-transform: uppercase;
    font-weight: 400;
}

// ugly moodle button group fix be like
.show > .btn-outline-secondary.dropdown-toggle {
    border-color: $primary;
    color: darken($color: $primary, $amount: 8%);
}
.inputables {
    button.dropdown-toggle,
    input[type="text"],
    input[type="number"],
    textarea,
    select.select {
        @include borderRadius(.5rem);
        border-color: $gray-2;
        background-color: $white;
        &:focus {
            box-shadow: none;
        }
        &:focus, &:active, &:hover {
            border-color: $primary;
            color: darken($color: $primary, $amount: 8%);
            background-color: $white;
        }
    }
}

body {
    background-color: $body-bgcolor;
}
body:not(.uses-drawers).drawer-open-left {
    margin-left: $main-navigation-width;
}

// top nav
nav.navbar {
    box-shadow: none;
    &.fixed-top {
        @extend .header-base;
        border-bottom: 1px solid $gray-2;
        // temporary move the left
        // left: $main-navigation-width;
        z-index: 1098;
        @media screen and (min-width: $breakpoint-48) {
            background-color: $white-1 !important;
        }
        .primary-navigation {
            display: none;
        }
        .navbar-brand {
            // position: fixed;
            // left: 0;
            // height: 5.5rem;
            // padding: 0 1.75rem !important;
            // margin: 1.5rem 0 0 !important;
            // width: $main-navigation-width;
            display: none;
        }
        // > div {
        //     button.btn.nav-link {
        //         // temporary hide the toggler button
        //         display: none !important;
        //     }
        // }
        // ul.usernav {
        //     li.nav-item {
        //         i.icon {
        //             font-size: 2.25rem;
        //         }
        //     }
        // }
    }
}

// nav-drawer main-navigation
#nav-drawer {
	position: fixed;
	top: 0;
	left: 0;
    min-height: 100vh;
	width: $main-navigation-width;
    background-color: $main-navigation-bgcolor;
    box-shadow: .125rem 0 .5rem 0 $shadow-1;
    z-index: 1099;
    padding: $main-navigation-padding;
    scrollbar-color: lighten($purple-2, 50%) $gray-1;
    scrollbar-width: thin;
    &.closed {
	    left: 0;
    }
    nav {
        ul {
            li {
                margin-bottom: $nav-link-spacing-after;
                .list-group-item {
                    // ensure closed is useless in desktop
                    display: block !important;
                    height: $nav-link-height;
                    line-height: $nav-link-height;
                    padding: $nav-link-padding;
                    border: 0;
                    &.active {
                        background: -webkit-linear-gradient($purple-1, $purple-2);
                        background-clip: text;
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                    }
                    &:focus, &:focus-visible {
                        outline: none;
                        box-shadow: none;
                    }
                }
            }
        }
    }
    @media screen and (max-width: $breakpoint-48) {
        width: 100%;
        top: 3rem;
        &.closed {
            left: -100%;
        }
    }
}

#page {
    padding: $page-padding;
    padding-left: $main-navigation-width + 2.25rem;
    margin-top: 0;
    #page-header {
        margin-bottom: $page-header-spacing-after;
        > div {
            padding: 0 !important;
        }
        .card {
            @extend .header-base;
            padding: 0 1rem;
            background-color: transparent;
            h1 {
                @extend .title-base;
                font-size: 1.5rem;
            }
            .card-body {
                padding: 0 !important;
                // should be important cause p-2
            }
        }
    }
    #page-content {
        #region-main-box {
            @extend .inputables;
            section#region-main {
                padding: 0;
                background-color: transparent;
                border: 0;
                overflow-x: visible;
                div[role="main"] {
                    > div {
                        @extend .white-box;
                    }
                    aside {
                        section {
                            @extend .white-box;
                        }
                    }
                }
            }
            aside#block-region-side-pre {
                section.card.block {
                    @extend .white-box;
                }
            }
        }
    }
    table {
        td.action {
            white-space: nowrap;
        }
    }
    @media screen and (max-width: $breakpoint-48) {
        padding: $page-padding;
    }
}

// button styles
#page, .modal {
    .btn.btn-primary {
        @extend .button-light;
    }
    .btn.btn-secondary {
        @extend .button-purple;
    }
    .btn.btn-danger {
        @extend .button-light;
        background-color: lighten($color: $pink, $amount: 30%);
    }
    .btn.btn-info {
        @extend .button-light;
        background-color: lighten($color: $green-1, $amount: 30%);
    }
}

footer#page-footer {
    display: none;
}

.modal-content {
    @include borderRadius(1rem);
    padding: $modal-padding;
    .modal-header {
        h5, h6 {
            @extend .title-base;
        }
    }
}

// additional cleanup rules
#action-menu-toggle-1,
.modal-dialog.modal-dialog-scrollable {
    &:focus {
        box-shadow: none;
    }
}
// remove "customize this page" button
#page #page-header .card .card-body .singlebutton form button {
    display: none;
}