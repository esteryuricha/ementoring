{"version":3,"sources":["../src/confirm.js"],"names":["define","$","ModalFactory","ModalEvents","Ajax","Notification","trigger","create","type","types","SAVE_CANCEL","title","body","preShowCallback","triggerElement","modal","id","value","params","setSaveButtonText","large","done","getRoot","on","save","e","preventDefault","footer","Y","one","setContent","spinner","M","util","add_spinner","show","request","methodname","args","call","data","window","location","reload","addNotification","message","fail","exception"],"mappings":"AAEAA,OAAM,wBAAC,CAAC,QAAD,CAAW,oBAAX,CAAiC,mBAAjC,CAAsD,WAAtD,CAAmE,mBAAnE,CAAD,CAA0F,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAAuCC,CAAvC,CAA6CC,CAA7C,CAA2D,CACxJ,GAAIC,CAAAA,CAAO,CAAGL,CAAC,CAAC,6BAAD,CAAf,CACAC,CAAY,CAACK,MAAb,CAAoB,CACjBC,IAAI,CAAEN,CAAY,CAACO,KAAb,CAAmBC,WADR,CAEjBC,KAAK,CAAE,eAFU,CAGjBC,IAAI,CAAE,6CAHW,CAIjBC,eAAe,CAAE,yBAASC,CAAT,CAAyBC,CAAzB,CAAgC,CAC9CD,CAAc,CAAGb,CAAC,CAACa,CAAD,CAAlB,CAEA,GAAIE,CAAAA,CAAE,CAAGF,CAAc,CAAC,CAAD,CAAd,CAAkBG,KAA3B,CAEAF,CAAK,CAACG,MAAN,CAAe,CAAC,GAAMF,CAAP,CAAf,CACAD,CAAK,CAACI,iBAAN,CAAwB,eAAxB,CACF,CAXgB,CAYjBC,KAAK,GAZY,CAApB,CAaGd,CAbH,EAcCe,IAdD,CAcM,SAASN,CAAT,CAAgB,CAEnBA,CAAK,CAACO,OAAN,GAAgBC,EAAhB,CAAmBpB,CAAW,CAACqB,IAA/B,CAAqC,SAASC,CAAT,CAAY,CAE9CA,CAAC,CAACC,cAAF,GAEA,GAAIC,CAAAA,CAAM,CAAGC,CAAC,CAACC,GAAF,CAAM,eAAN,CAAb,CACAF,CAAM,CAACG,UAAP,CAAkB,aAAlB,EACA,GAAIC,CAAAA,CAAO,CAAGC,CAAC,CAACC,IAAF,CAAOC,WAAP,CAAmBN,CAAnB,CAAsBD,CAAtB,CAAd,CACAI,CAAO,CAACI,IAAR,GACA,GAAIC,CAAAA,CAAO,CAAG,CACRC,UAAU,CAAE,4BADJ,CAERC,IAAI,CAAEvB,CAAK,CAACG,MAFJ,CAAd,CAIAd,CAAI,CAACmC,IAAL,CAAU,CAACH,CAAD,CAAV,EAAqB,CAArB,EAAwBf,IAAxB,CAA6B,SAASmB,CAAT,CAAe,CACtC,GAAI,KAAAA,CAAJ,CAAmB,CAEhBC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EACF,CAHD,IAGO,CACJtC,CAAY,CAACuC,eAAb,CAA6B,CAC1BC,OAAO,CAAE,MADiB,CAE1BrC,IAAI,CAAE,OAFoB,CAA7B,CAIF,CACN,CAVD,EAUGsC,IAVH,CAUQzC,CAAY,CAAC0C,SAVrB,CAWF,CAvBD,CAwBF,CAxCD,CAyCF,CA3CK,CAAN","sourcesContent":["/* eslint-disable linebreak-style */\r\n/* eslint-disable no-unused-vars */\r\ndefine(['jquery', 'core/modal_factory', 'core/modal_events', 'core/ajax', 'core/notification'], function($, ModalFactory, ModalEvents, Ajax, Notification) {\r\n   var trigger = $('.local_mentor_delete_button');\r\n   ModalFactory.create({\r\n      type: ModalFactory.types.SAVE_CANCEL,\r\n      title: 'Delete Mentor',\r\n      body: '<p>Are you sure to delete this mentor ?</p>',\r\n      preShowCallback: function(triggerElement, modal) {\r\n         triggerElement = $(triggerElement);\r\n\r\n         let id = triggerElement[0].value;\r\n\r\n         modal.params = {'id': id};\r\n         modal.setSaveButtonText('Delete Mentor');\r\n      },\r\n      large: true\r\n   }, trigger)\r\n   .done(function(modal) {\r\n      // Do what you want with your new modal.\r\n      modal.getRoot().on(ModalEvents.save, function(e) {\r\n         // Stop the default save button behaviour which is to close the modal.\r\n         e.preventDefault();\r\n\r\n         let footer = Y.one('.modal-footer');\r\n         footer.setContent('Deleting...');\r\n         let spinner = M.util.add_spinner(Y, footer);\r\n         spinner.show();\r\n         let request = {\r\n               methodname: 'local_mentor_delete_mentor',\r\n               args: modal.params,\r\n         };\r\n         Ajax.call([request])[0].done(function(data) {\r\n               if (data === true) {\r\n                  // Redirect to manage page.\r\n                  window.location.reload();\r\n               } else {\r\n                  Notification.addNotification({\r\n                     message: 'fail',\r\n                     type: 'error',\r\n                  });\r\n               }\r\n         }).fail(Notification.exception);\r\n      });\r\n   });\r\n});"],"file":"confirm.min.js"}